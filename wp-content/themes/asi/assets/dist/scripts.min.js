!function(e){var n={challengeElement:null,context:null,currentDiv:"",backgroundImages:[],scrollHeight:0,init:function(){n.challengeElement=document.querySelector(".breakpoint-context"),n.challengeContext(),n.setupWaypoints(),n.putImagesInArray(),n.randomizeImages(),n.changeImage(".purple-section",n.randomizeImages()),n.changeImage(".green-section",n.randomizeImages()),n.changeImage(".blue-section",n.randomizeImages()),n.changeImage(".shark-section",n.randomizeImages()),n.changeImage(".services-green-section",n.randomizeImages()),n.changeImage(".company-head-section",n.randomizeImages()),n.changeImage(".default-section",n.randomizeImages()),e(window).resize(n.debounce(function(){n.challengeContext()},250)),e(".js-fitvid-embed").fitVids()},challengeContext:function(){var e=window.getComputedStyle(n.challengeElement),o=parseInt(e.getPropertyValue("z-index"),10),a={1:"mobile",2:"tablet"};n.context=a[o]||"desktop"},putImagesInArray:function(){e(".hidden-images > img").each(function(){var o=e(this);n.backgroundImages.push({src:o.attr("src"),title:o.attr("title")})})},randomizeImages:function(){var e=n.backgroundImages.length,o=Math.floor(Math.random()*e);return n.backgroundImages[o]},changeImage:function(n,o){var a=e(n);a.length&&e(window).width()>640&&(a.css("background","url("+o.src+") no-repeat center center fixed").css("background-size","cover"),e(".js-artist-title-space").html(o.title))},scrollChange:function(){var o=e(document).scrollTop();(o>400+n.scrollHeight||o<n.scrollHeight-400)&&(n.changeImage(n.currentDiv,n.randomizeImages()),n.scrollHeight=o)},setupWaypoints:function(){var o=e(".js-show-logo");o.length&&new Waypoint({element:e(".js-show-logo"),handler:function(){e(".desktop-logo").toggleClass("active-logo")}});var a=e(".js-pink-navigation");a.length&&new Waypoint({element:a,handler:function(o){e(".js-desktop-header").addClass("pink-nav"),n.currentDiv=".purple-section"}});var t=e(".js-yellow-navigation");t.length&&(new Waypoint({element:t,handler:function(n){"down"===n?(e(".js-desktop-header").addClass("yellow-nav"),e(".js-desktop-header").removeClass("pink-nav")):(e(".js-desktop-header").addClass("pink-nav"),e(".js-desktop-header").removeClass("yellow-nav"))}}),new Waypoint({element:t,handler:function(e){"down"===e?n.currentDiv=".green-section":n.currentDiv=".purple-section"},offset:"50%"}));var i=e(".js-orange-navigation");i.length&&(new Waypoint({element:i,handler:function(n){"down"===n?(e(".js-desktop-header").addClass("orange-nav"),e(".js-desktop-header").removeClass("yellow-nav")):(e(".js-desktop-header").addClass("yellow-nav"),e(".js-desktop-header").removeClass("orange-nav"))}}),new Waypoint({element:i,handler:function(e){"down"===e?n.currentDiv=".blue-section":n.currentDiv=".green-section"},offset:"50%"}));var s=e(".js-lime-navigation");s.length&&(new Waypoint({element:s,handler:function(n){"down"===n?(e(".js-desktop-header").addClass("lime-nav"),e(".js-desktop-header").removeClass("orange-nav")):(e(".js-desktop-header").addClass("orange-nav"),e(".js-desktop-header").removeClass("lime-nav"))}}),new Waypoint({element:s,handler:function(e){"down"===e?n.currentDiv=".shark-section":n.currentDiv=".blue-section"},offset:"50%"}));var r=e(".services-green-section");r.length&&new Waypoint({element:r,handler:function(e){n.currentDiv=".services-green-section"}});var l=e(".default-section");l.length&&new Waypoint({element:l,handler:function(e){n.currentDiv=".default-section"}});var c=e(".company-head-section");c.length&&new Waypoint({element:c,handler:function(e){n.currentDiv=".company-head-section"}})},debounce:function(e,n){var o=null;return function(){var a=this,t=arguments;clearTimeout(o),o=setTimeout(function(){e.apply(a,t)},n)}},hamburgerToggle:function(){e(".js-mobile-navigation").slideToggle(),e(".mobile-header").toggleClass("active-mobile-menu")},openQandA:function(n){console.log(n),e(n).parents(".js-question").toggleClass("active-qanda")},hideDSP:function(){e(".dsp-list").hide()},showDSP:function(){e(".dsp-list").show()},hideJoinUs:function(){e(".module-join-us").hide()},hideJoinUsEsc:function(e){27==e.keyCode&&n.hideJoinUs()},showJoinUs:function(){e(".module-join-us").show()},showTopics:function(){e(".dropdown-items").toggleClass("js-items-triggered")},ajaxSignUp:function(n){$form=e(n),$form_action=$form.attr("action"),$form_data={EMAIL:$form.find('input[name="EMAIL"]').val(),FNAME:$form.find('input[name="FNAME"]').val(),LNAME:$form.find('input[name="LNAME"]').val()};for(var o in $form_data){var a=$form_data[o];if("EMAIL"===o&&!a.includes("@"))return e(".signup-box p").hide(),e(".signup-box .invalid-email").fadeIn(),void e(".signup-box .email").addClass("error-outline")}e.ajax({type:"POST",url:$form_action,data:$form_data,dataType:"jsonp",error:function(n,o,a){e(".signup-box p").hide(),e(".signup-box .signup-failure").fadeIn()},success:function(n){e(".signup-box p").hide(),e(".hide-on-success").css("opacity","0"),e(".signup-success").fadeIn()}})},ajaxEmail:function(n){$form=e(n),$form_action=$form.attr("action"),$form_data={EMAIL:$form.find('input[name="EMAIL"]').val()};for(var o in $form_data){var a=$form_data[o];if("EMAIL"===o&&!a.includes("@"))return e(".email-form p").hide(),e(".email-form .invalid-email").fadeIn(),void e(".email-form .email-input").addClass("error-outline")}e.ajax({type:"POST",url:$form_action,data:$form_data,dataType:"jsonp",error:function(n,o,a){e(".email-form p").hide(),e(".email-form .signup-failure").fadeIn()},success:function(n){e(".email-form p").hide(),e(".email-form .signup-success-footer").fadeIn(),e(".email-input").removeClass("error-outline")}})}};e(document).ready(function(){n.init()}).on("click",".js-hamburger-helper",function(){n.hamburgerToggle()}).on("touchend click",".js-question .question-collapse",function(e){e.preventDefault(),n.openQandA(this)}).on("touchend click",".js-question .question-collapse-open",function(e){e.preventDefault(),n.openQandA(this)}).on("touchend click",".js-dropdown-trigger",function(){n.showTopics()}).on("click",".js-close-dsp",function(){n.hideDSP()}).on("click",".js-open-dsp",function(){n.showDSP()}).on("click",".js-back-arrow",function(){n.hideJoinUs()}).on("click",".js-open-joinus",function(){n.showJoinUs()}).on("scroll",function(e){n.scrollChange()}).on("submit","form.signup-box",function(e){e.preventDefault(),n.ajaxSignUp(this)}).on("submit","form.email-form",function(e){e.preventDefault(),n.ajaxEmail(this)}).on("keyup",function(e){n.hideJoinUsEsc(e)})}(jQuery);